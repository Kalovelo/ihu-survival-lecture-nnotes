# Αρχές Δικτυακών Εφαρμογών

## Αρχιτεκτονική Δικτυακών Εφαρμογών

Υπάρχουν δύο βασικά μοντέλα αρχιτεκτονικής δικτυακών εφαρμογών

- Peer to peer
- Client - Server

### Client - Server

- Ύπαρξη ενός πάντα ενεργού υπολογιστή (server)
  - Εξυπηρέτηση αιτήσεων υπηρεσιών 
- Οι πελάτες για να επικοινωνήσουν μεταξύ τους, πρέπει να το κάνουν μέσω του ενδιάμεσου server.
- Όταν οι απαιτήσεις είναι πολλές, χρησιμοποιείται ένα σύμπλεγμα servers ονόματι **Κέντρο δεδομένων (data center)**, δημιουργώντας ένα μοναδικό, ισχυρό server

### Peer to Peer | Αγαπητά Τορεντάδικα

- Ελάχιστη / Καθόλου στήριξη από servers.
- **Απευθείας επικοινωνία** ανάμεσα σε ζεύγη υπολογιστών που καλούνται peers.
  - **Δεν ανήκουν** σε κάποιο πάροχο
  - Κάθε peer **παράγει φόρτο** ζητώντας αρχεία
  - Κάθε peer μπορεί να **στηρίξει** διανέμοντας αρχεία
- **Προβλήματα** ασφάλειας, απόδοσης, αξιοπιστίας.

## Επικοινωνία Διεργασιών

Οι διεργασίες επικοινωνούν με το δίκτυο μέσω μιας διεπαφής λογισμικού που καλείται **socket** ή **API**. Ο προγραμματιστής έχει τον έλεγχο για **οτιδήποτε στο επίπεδο εφαρμογής** αλλά ελάχιστα στο **επίπεδο μεταφοράς**.

Επειδή πολλές socket μπορεί να λειτουργούν σε έναν υπολογιστή, η αναφορά σε αυτές μπορεί να γίνει μέσω των **αριθμών θυρών (port numbers)**

## Υπηρεσίες Μεταφοράς στο επίπεδο Εφαρμογής

### 1. Αξιόπιστη Μεταφορά Δεδομένων

Γνωρίζουμε πως μπορεί να υπάρξει απώλεια δεδομένων εξαιτίας υπερχείλισης ενταμιευτή ή απόρριψης από αυτόν.

Ενα πρωτόκολλο με αυτή την υπηρεσία, είναι αυτό που παρέχει υπηρεσίες εγγυημένης αποστολής δεδομένων. 

### 2. Διεκπεραιωτική Ικανότητα

Ορισμός: Ο ρυθμός με τον οποίο η διεργασία αποστολής μπορεί να παραδίδει bit στην διεργασία λήψης.

Με βάση αυτή την υπηρεσία, υπάρχει κατηγοριοποίηση εφαρμογών με βάση τις απαιτήσεις:

1. Εφαρμογές Ευαίσθητες στο εύρος ζώνης
2. Ελαστικές εφαρμογές

### Χρονισμός

Ο χρόνος με τον οποίο φθάνει το κάθε bit.
Σε παιχνίδια πολλών παιχτών, θέλουμε κάθε bit να φτάνει σε χρόνο το πολύ X msec. 

### Ασφάλεια

Υπηρεσίες όπως κρυπτογράφηση παρέχουν εμπιστευτικότητα. Άλλες μόντες μπορεί να παρέχουν ακεραιότητα των δεδομένων ή αυθεντικοποίηση.


## Υπηρεσίες Μεταφοράς στο επίπεδο Μεταφοράς

### TCP

- Συνδεσμική Υπηρεσία
  - Server & Client πρέπει να δώσουν το χέρι πριν αρχίσουν να ανταλλάσσουν μηνύματα
- Αξιόπιστη μεταφορά δεδομένων
  - Παράδοση όλων των δεδομένων και με σωστή σειρά
- Αμφίδρομη Σύνδεση
  - Ταυτόχρονη αποστολή και λήψη μηνυμάτων
- Μηχανισμός Έλεγχος Συμφόρησης
  - Παραμετροποίηση διεργασιών αποστολής σε περιπτώσεις συμφόρησης 

### UDP | Χύμα στο Κύμα

- Απλό, Ελαφρύ, μη συνδεσμικό.
- *Φτύνει τα δεδομένα*
- Καμία εγγύηση ότι το μήνυμα θα φτάσει
- Κανένας μηχανισμός ελέγχου συμφόρησης
- Τα μηνύματα μπορεί να φθάσουν εκτός σειράς
- Χρήσιμο σε εφαρμογές πραγματικού χρόνου (Τηλεφωνία) όπου οι καθυστερήσεις μπορούν να μας γλεντήσουν

## Πρωτόκολλα Επιπέδου Εφαρμογής

Ορίζουν πως οι διεργασίες μιας εφαρμογής που εκτελούνται σε διαφορετικά τερματικά συστήματα  θα ανταλλάσσουν μηνύματα, Συγκεκριμένα:

1. Τύπο μηνύματος
2. Σύνταξη πεδίων
3. Σημασιολογία πεδίων
4. Επαλήθευση πεδίων για απόρριψη / αποδοχή

## Το Web και το HTTP

### HTTP

- Λειτουργεί στο επίπεδο **Εφαρμογής**
- Ακολουθεί το μοντέλο **Client - Server**
- Ορίζει τη δομή των μηνυμάτων μεταξύ C-S
- Χρησιμοποιεί TCP
- Είναι **stateless**
  - Δεν αποθηκεύει πληροφορίες κατάστασης για τον πελάτη, κάθε request διαχειρίζεται ξεχωριστά.

**Χρόνος διαδρομής μετ'επιστροφής (Round-trip time,RTT)**: Χρόνος που απαιτείται για ένα μικρό πακέτο ώστε να ταξιδέψει από client -> Server και μετά πάλι πίσω. Περιέχει 
- Καθυστέρησεις Διάδοσης πακέτου
- Καθυστέρησεις Ουράς Πακέτου
- Καθυστέρησεις Επεξεργασίας Πακέτου
  
#### Μη Παραμένουσες και Παραμένουσες Συνδέσεις





- **Μη Παραμένουσες (Non - Persistent)**
  - Κάθε ζεύγος αίτησης - απόκρισης στέλνεται μέσω ξεχωριστής σύνδεσης TCP
  - Μεταφέρεται ακριβώς 1 μήνυμα αίτησης και ένα 1 μήνυμα απόκρισης1 κάθε φορά
  - >Θέλω 10 φωτογραφίες; 10 TCP συνδέσεις.


**Παραμένουσες (Persistent)**: Κάθε ζεύγος αίτησης - απόκρισης στέλνεται μέσω μιας σύνδεσης TCP
  - Ο Server αφήνει τη σύνδεση TCP ανοιχτή μετά την αποστολή μιας απόκρισης, για μελλοντικές αιτήσεις σε περίοδο χρόνου
  - Κλείνει με το πέρασμα της περιόδου
  - >Θέλω 10 φωτογραφίες; 1 TCP σύνδεση.
  

#### Web Cache  - Proxy Server

Μια οντότητα δικτύου που ικανοποιεί αιτήσης HTTP **εκ μέρους server**. Έχει το δικό της χώρο αποθήκευσης σε δίσκο και κρατά αντίγραφα των αντικειμένων που ζητήθηκαν πρόσφατα.

1. Αίτηση από browser στη Web Cache για συγκεκριμένο αντικείμενο 
2. Αν η Cache έχει το αντικείμενο, τότε το στέλνει στον browser.
3. Αν όχι, τότε η Web Cache κάνει μια αίτηση στον αρχέτυπο server και αποθηκεύει το αντικείμενο αφού το στείλει στον Client.

Παίζει μπάλα με 2 ρόλους, και σαν Server αλλά και Client.

| Πλεονεκτήματα |
| :--|
| Μείωση χρόνου απόκρισης | 
| Μείωσης κίνησης ζεύξης προσπέλασης προς Διαδίκτυο |
| Μείωση εύρους ζώνης -> Μείωση κόστους |

>Επειδή κάποια αντικείμενα που είναι στην Cache μπορεί να είναι ληγμένα, χρησιμοποιείται το **conditional GET** το οποίο χρησιμοποιεί ένα πεδίο If-Modified-Since