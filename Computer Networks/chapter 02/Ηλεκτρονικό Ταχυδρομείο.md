# Ηλεκτρονικό Ταχυδρομείο στο Διαδίκτυο

- Οι mail servers αποτελούν τον πυρήνα της υποδομής.
-  Κάθε παραλήπτης έχει μια **ταχυδρομική θυρίδα (mailbox)** που βρίσκεται σε ένα mailserver.
   -  Η θυρίδα **διαχερίζεται και κρατά** τα μηνύματα του παραλήπτη. 
   -  Διαχειρίζεται επίσης, τις αποτυχίες αποστολής κρατώντας το μήνυμα σε μια **ουρά μηνυμάτων** όπου επαναπροσπαθεί συνήθως ανά 30 λεπτά.
- Χρησιμοποιεί το SMTP ως κύριο πρωτόκολλο επιπέδου εφαρμογής για ηλεκτρονικό ταχυδρομείο.

## SMTP 

Μεταφέρει μηνύματα από τους mail servers χρηστών στους mail servers παραληπτών.

1. Η Αλίκη καλεί το mail client. Έπειτα δίνει τη διεύθυνση του Ρομπέρτο, συνθέτει το μήνυμα και λέει στο mail client να στείλει το μήνυμα.
2. Ο mail client στέλνει το μήνυμα στο mail server της όπου **τοποθετείται** στην ουρά μηνυμάτων.
3. Η client πλευρά του SMTP που εκτελείται στον mail server της Αλίκης βλέπει το μήνυμα να κάθεται στην ουρά. Ανοίγει μια σύνδεση TCP  σε ένα SMTP server που εκτελείται στο mail server του Ρομπέρτο.
4. Μετά από κάποια αρχική χειραψία SMTP, ο client στέλνει το μήνυμα της Αλίκης στη σύνδεση TCP.
5. Στο mail server του Ρομπέρτο η πλευρά SMTP client λαμβάνει το μήνυμα. Ο mail server του Ρομπέρτο τοποθετεί το μήνυμα στη θυρίδα του.
6. Ο Ρομπέρτο καλεί το mail client το και διαβάζει το μήνυμα όταν βρει χρόνο. 


### SMTP vs HTTP

|                              HTTP                              |                               SMTP                               |
| :------------------------------------------------------------: | :--------------------------------------------------------------: |
| Μεταφέρει αρχεία από Η/Υ σε Η/Υ - Από web server σε web client | Μεταφέρει αρχεία από Η/Υ σε Η/Υ - Από mail server σε mail server |
|                    Συνδέσεις: Παραμένουσες                     |                     Συνδέσεις: Παραμένουσες                      |
|                   Πρωτόκολλο **Προσέλκυσης**                   |                     Πρωτόκολλο **Προώθησης**                     |
|                 Χωρίς περιορισμό κωδικοποίησης                 |               Περιορισμός: Μηνύματα σε ASCII 7 bit               |
|      Ενθυλάκωση κάθε αντικειμένου μέσα σε δικό του μήνυμα      |          Τοποθέτηση όλων των αντικειμένων σε ένα μήνυμα          |

## POP3

Απλό πρωτοκολλάκι προσπέλασης email. Απλό αλλά περιοριστικό 🙁.

- Εκκινεί όταν ο client ανοίγει μια σύνδεση TCP προς το mail server.
- Παίζει σε 3 φάσεις, εξουσιοδότηση, συναλλαγή και ενημέρωση.
  - Ο client στέλνει όνομα χρήστη και συνθηματικό **χωρίς κρυπτογράφηση**.
  - Έπειτα γίνεται η ανάκτηση μηνυμάτων. Εδώ μπορεί να γίνει και διαγραφή
- Συνήθως ανακτά μηνύματα και έπειτα τα διαγράφει από το mail server, αλλά αυτό μπορεί να παραμετροποιηθεί.

## IMAP

Πρωτοκολλάκι που επιτρέπει τη δημιουργία φακέλων στο mail server για ευκολότερη διαχείριση. 
