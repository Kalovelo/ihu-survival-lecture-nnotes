# Μεταγωγείς Επιπέδου Ζεύξης

Ο ρόλος του είναι να λαμβάνει **εισερχόμαι πλαίσια επιπέδου ζεύξης** και να τα **προωθεί σε εξερχόμενες ζεύξεις**.

Είναι **διαφανής(transparent)** για τους υπολογιστές & δρομολογητές στο υποδίκτυο.
Δηλαδή, ένας υπολογιστής/δρομολογητής απευθύνει ένα πλαίσιο σε έναν άλλο Η/Υ ή δρομολογητή 
και στέλνει ένα πλαίσιο στο LAN, δεν γνωρίζει ότι το πλαίσιο **θα παραληφθεί από ένα μεταγωγέα** ο οποιός
θα το προωθήσει. 

Είναι επίσης συσκευές **τοποθέτησης άμεσης λειτουργίας (plug-and-play)**: Δεν απαιτούν παρέμβαση από διαχειριστή δικτύου.
Αυτό που πρέπει να κάνει είναι να συνδέσει τα τμήματα LAN στις διεπαφές του μεταγωγέα.

Τέλος, είναι **αμφίδρομοι**, κάθε διεπαφή μπορεί να αποστέλενι και να λαμβάνει ταυτόχρονα.

Υπάρχουν **ενταμιευτές** στις διεπαφές εξόδου για να διαχειριστεί η υπέρβαση της χωρητικότητας ζεύξης.

## Προώθηση & Φιλτράρισμα

**Φιλτράρισμα (filtering)**: είναι η δυνατότητα ενός μεταγωγέα να καθορίσει
εάν ένα πλαίσιο πρέπει να προωθείται σε κάποια διεπαφή ή πρέπει να **απορρίπτεται**.  
**Προώθηση (forwarding)**: Η λειτουργία να προσδιορίζει τις διεπαφές στις οποίες πρέπει 
να κατευθύνεται ένα πλαίσιο και κατόπιν μετακινεί το πλαίσιο σε αυτές τις διεπαφές.  
**Πίνακα Μεταγωγέα (switch table)**: Περίέχει καταχωρίσεις για ορισμένους (αν όχι όλους) Η/Υ & δρομολογητές
ενός LAN. Μια καταχώριση μέσα στον πίνακα περιέχει
1. μια διεύθυνση MAC
2. Διεπαφή μεταγωγέα που οδηγεί προς αυτή την διεύθυνση MAC
3. Χρόνος που τοποθετήθηκε η καταχώριση 

### Περιπτώσεις Πίνακα Μεταγωγέα

Έστω ότι φθάνει ένα πλαίσιο με διεύθυνση προορισμού Ζ στη διεπαφή x μεταγωγέα.

3 Σενάρια:
- Δεν υπάρχει καταχώριση μέσα στον πίνακα για διεύθυνση Ζ. 
  - Ο μεταγωγέας **προωθεί** αντίγραφα του πλαισίου στους **ενταμιευτές** εξόδου όλων των διασυνδέσεων, εκτός της διεπαφής x.
- Υπάρχει μια καταχώριση που σχετίζει τη Ζ με τη διεπαφή x.
  - Το πλαίσιο προέρχεται από ένα τμήμα του LAN που περιέχει τον προσαρμογέα Ζ. Δεν χρειάζεται λοιπόν να προωθηθεί, οπότε
  ο μεταγωγέας απορρίπτει το πακέτο.
- Υπάρχει μια καταχώριση που σχετίζει τη Ζ με μια διεπαφή y **!=** x. 
  - Το πλαίσιο πρέπει να προωθηθεί στο τμήμα LAN που είναι συνδεδεμένο στη διεπαφή y.

### Αυτοεκμάθηση Πίνακα

Κτίζεται αυτόματα!

Διαδικασία
1. Είναι αρχικά κενός
2. Για κάθε πλαίσιο αποθηκεύονται
   1. διεύθυνση MAC 
   2. Διεπαφή από που έφτασε
   3. Τρέχουσα ώρα 
3. Αν δεν ληφθεί ένα πακέτο από μια διεύθυνση μέσα σε ένα χρονικό διάστημα **(χρόνος γήρανσης, aging time)**. Με αυτό τον τρόπο εάν ένα PC
αντικατασταθεί από ένα άλλο, θα αντικατασταθεί και η συσχέτιση του στον πίνακα.

## Ιδιότητες μεταγωγής επιπέδου ζεύξης

**Εξάλειψη Συγκρούσεων**: Δεν υπάρχει σπατάλη εύρους ζώνης λόγω συγκρούσεων. 
**Ενταμιεύουν και δεν μεταδίδουν** πάνω από 1 πλαίσιο σε ένα τμήμα ανα πάσα στιγμή.
Η μέγιστη διεκπεραιωτική ικανότητα είναι το άθροισμα των ρυθμών όλων των διεπαφών.

**Ετερογενείς ζεύξεις**:  Επειδή ό μεταγωγέας απομονώνει τις ζεύξεις από τις άλλες,
οι διαφορετικές ζεύξεις μέσα στο LAN μπορούν να λειτουργούν **με διαφορετικές ταχύτητες**.


**Διαχείριση**: Μπόλικη **Ασφάλεια**. **Διευκόλυνση**. Αν ένας προσαρμογέας δυσλειτουργεί, τότε
ο μεταγωγέας μπορεί να ανιχνεύσει το πρόβλημα και να **αποσυνδέσει εσωτερικά** το χαλασμένο προσαρμογέα.


## Μεταγωγείς vs δρομολογητές

Δρομολογητές: **Μεταγωγείς αποθήκευσης-προώθησης** πακέτων χρησιμοποιώντας
**διευθύνσεις επιπέδου (3) δικτύου, IP**.

Μεταγωγείς:**Μεταγωγείς αποθήκευσης-προώθησης** πακέτων χρησιμοποιώντας
**διευθύνσεις επιπέδου (2) ζεύξης, MAC**.


### Μεταγωγείς
|                       Θετικά                       |                                                             Αρνητικά                                                             |
| :------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------: |
|                 Άμεσης λειτουργίας                 |                           Η ενεργή τοπολογία ενός δικτύου μεταγωγής περιορίζεται σ'ένα δέντρο κάλυψης                            |
| Υψηλοί ρυθμοί φιλτραρίσματος και προώθησης πακέτων | Ένα μεγάλο δίκτυο  απαιτεί μεγαλύτερους πίνακες ARP μέσα στους Η/Υ & Δρομολογητές, άρα **μεγαλύτερη κίνηση και επεξεργασία ARP** |
|                         -                          |                                     Δεν προσφέρουν καμία προστασία από καταιγισμούς εκπομπής                                     |

### Δρομολογητές

|                                                    Θετικά                                                     |                   Αρνητικά                   |
| :-----------------------------------------------------------------------------------------------------------: | :------------------------------------------: |
| Τα πακέτα δεν κάνουν κυκλικές διαδρομές μέσω δρομολογητών. Υπάρχει ειδικό πειδίο κεφαλίδας δεδομενογράμματος. | Δεν είναι τοποθέτησης και άμεσης λειτουργίας |
|                     Χρησιμοποιούν την καλύτερη διαδρομή ανάμεσα στην προέλευση-προορισμό                      |       Μεγαλύτερος χρόνος επεξεργασίας        |
|                        Παρέχουν προστασία firewall από καταιγισμό εκπομπής επιπέδου 2.                        |                      -                       |

### Συνοπτικά 

|           Χαρακτηριστικό           | Ομφαλοί | Δρομολογητές | Μεταγωγείς |
| :--------------------------------: | :-----: | :----------: | :--------: |
|         Απομόνωση κίνησης          |    ❌    |      ✅       |     ✅      |
| Τοποθέτησης και άμεσης λειτουργίας |    ❌    |      ❌       |     ✅      |
|        Βέλτιστη δρομολόγηση        |    ❌    |      ✅       |     ❌      |

Πότε επιλέγουμε τι;

Μίκρο δίκτυο: Routers
Μεγάλο δίκτυο: Switches